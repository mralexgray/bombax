<!-- This comment will put IE 6, 7 and 8 in quirks mode -->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Bombaxtic Framework: BxApp Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javaScript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.6.2 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <img id="MSearchSelect" src="search/search.png"
             onmouseover="return searchBox.OnSearchSelectShow()"
             onmouseout="return searchBox.OnSearchSelectHide()"
             alt=""/>
        <input type="text" id="MSearchField" value="Search" accesskey="S"
             onfocus="searchBox.OnSearchFieldFocus(true)" 
             onblur="searchBox.OnSearchFieldFocus(false)" 
             onkeyup="searchBox.OnSearchFieldChange(event)"/>
        <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
        </div>
      </li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
      <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>BxApp Class Reference</h1><!-- doxytag: class="BxApp" -->
<p>Routes client requests to <a class="el" href="interface_bx_handler.html" title="Persistent handler for client requests.">BxHandler</a> instances.  
<a href="#_details">More...</a></p>

<p><a href="class_bx_app-members.html">List of all members.</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">(id)&nbsp;</td><td class="memItemRight" valign="bottom">- <a class="el" href="interface_bx_app.html#a725c63f1ee586e5e503c5384062e94b6">exit:</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">invoked as the <a class="el" href="interface_bx_app.html" title="Routes client requests to BxHandler instances.">BxApp</a> is exiting  <a href="#a725c63f1ee586e5e503c5384062e94b6"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">(NSString *)&nbsp;</td><td class="memItemRight" valign="bottom">- <a class="el" href="interface_bx_app.html#a5b86045ed0caa85e3d8c5439d33dad63">handlerForPath:</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns the classname of the handler for a given path.  <a href="#a5b86045ed0caa85e3d8c5439d33dad63"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">(id)&nbsp;</td><td class="memItemRight" valign="bottom">- <a class="el" href="interface_bx_app.html#a40fdd156e29dfc464c9d8a211097925d">launchConfigurator</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Overridden to provide a configuration user interface.  <a href="#a40fdd156e29dfc464c9d8a211097925d"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">(id)&nbsp;</td><td class="memItemRight" valign="bottom">- <a class="el" href="interface_bx_app.html#ae23fc1d12ca86dfa4a8dedd8b2dcb552">setDefaultHandler:</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Sets the default handler.  <a href="#ae23fc1d12ca86dfa4a8dedd8b2dcb552"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">(id)&nbsp;</td><td class="memItemRight" valign="bottom">- <a class="el" href="interface_bx_app.html#a78e9d9cb3d16094c40d8ff98f6e62d78">setHandler:forKeyword:</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Sets the handler for paths that contain the keyword.  <a href="#a78e9d9cb3d16094c40d8ff98f6e62d78"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">(id)&nbsp;</td><td class="memItemRight" valign="bottom">- <a class="el" href="interface_bx_app.html#aea841290d214595554e44adcf8eaabca">setHandler:forMatch:</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Sets the handler for exactly matching paths.  <a href="#aea841290d214595554e44adcf8eaabca"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">(id)&nbsp;</td><td class="memItemRight" valign="bottom">- <a class="el" href="interface_bx_app.html#a30f4f4af04324695b35089da48acfe14">setHandler:forPrefix:</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Sets the handler for paths that have the prefix.  <a href="#a30f4f4af04324695b35089da48acfe14"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">(id)&nbsp;</td><td class="memItemRight" valign="bottom">- <a class="el" href="interface_bx_app.html#a9bf46a259ed9d647acd6740304188756">setHandler:forSuffix:</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Sets the handler for paths that have the suffix.  <a href="#a9bf46a259ed9d647acd6740304188756"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">(id)&nbsp;</td><td class="memItemRight" valign="bottom">- <a class="el" href="interface_bx_app.html#a7cd5bf87114bdb030d41885edfe79236">setup</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">overridden to configure the routing and initial state of the <a class="el" href="interface_bx_app.html" title="Routes client requests to BxHandler instances.">BxApp</a>  <a href="#a7cd5bf87114bdb030d41885edfe79236"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">(NSString *)&nbsp;</td><td class="memItemRight" valign="bottom">- <a class="el" href="interface_bx_app.html#ab717fd41fb9234f8ebf71f62c56ce635">staticWebPath:</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns the web path for a given static resource.  <a href="#ab717fd41fb9234f8ebf71f62c56ce635"></a><br/></td></tr>
<tr><td colspan="2"><h2>Properties</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">NSMutableDictionary *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="interface_bx_app.html#aed67360002e969b0490e8a5566d420bf">state</a></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>Routes client requests to <a class="el" href="interface_bx_handler.html" title="Persistent handler for client requests.">BxHandler</a> instances. </p>
<dl class="author"><dt><b>Author:</b></dt><dd>Bombaxtic LLC - <a href="http://www.bombaxtic.com">http://www.bombaxtic.com</a> </dd></dl>
<dl class="since"><dt><b>Since:</b></dt><dd>1.0</dd></dl>
<p>There is one <a class="el" href="interface_bx_app.html" title="Routes client requests to BxHandler instances.">BxApp</a> instance for each 'BxApp' Bombaxtic application. The <a class="el" href="interface_bx_app.html" title="Routes client requests to BxHandler instances.">BxApp</a> is primarily responsible for setting up the routing paths to match incoming requests with <a class="el" href="interface_bx_handler.html" title="Persistent handler for client requests.">BxHandler</a> instances.</p>
<p>Typically, a <a class="el" href="interface_bx_app.html" title="Routes client requests to BxHandler instances.">BxApp</a> examines whether an incoming request's path meets different matching criteria such as possessing a certain prefix or suffix in order to determine which <a class="el" href="interface_bx_handler.html" title="Persistent handler for client requests.">BxHandler</a> class is responsible for handling that request. Once the <a class="el" href="interface_bx_handler.html" title="Persistent handler for client requests.">BxHandler</a> has been determined, the class is instantiated and setup is called if it has not been already, and the <a class="el" href="interface_bx_transport.html" title="Handles communication with HTTP client.">BxTransport</a> for the request is passed to the <a class="el" href="interface_bx_handler.html" title="Persistent handler for client requests.">BxHandler</a> instance. If a <a class="el" href="interface_bx_handler.html" title="Persistent handler for client requests.">BxHandler</a> cannot be found to match the request, the default handler (set with setDefaultHandler) is used.</p>
<p>Because Objective-C <a class="el" href="interface_bx_handler.html" title="Persistent handler for client requests.">BxHandler</a> classes are not created from BXML until after your <a class="el" href="interface_bx_app.html" title="Routes client requests to BxHandler instances.">BxApp</a> subclass header is processed, it is not normally possible to import the BXML header. However, you can use the BXML file name (without the .bxml extension) in setting a handler. For example a BXML file called MyBxmlHandler.bxml could be set as a handler through, </p>
<div class="fragment"><pre class="fragment"> - (id)<a class="code" href="interface_bx_app.html#a7cd5bf87114bdb030d41885edfe79236" title="overridden to configure the routing and initial state of the BxApp">setup</a> {
     [<span class="keyword">self</span> setHandler:<span class="stringliteral">@&quot;MyBxmlHandler&quot;</span> forMatch:<span class="stringliteral">@&quot;example&quot;</span>];
     <span class="keywordflow">return</span> <span class="keyword">self</span>;
 }
</pre></div> <dl class="note"><dt><b>Note:</b></dt><dd>The BXML file name may be modified by using using '&lt;?name ?&gt;' tag. For example, the following should be accessed as 'MyRenamedHandler' regardless of the name of the file: <div class="fragment"><pre class="fragment"> &lt;?name MyRenamedHandler ?&gt;
 &lt;html&gt;
  &lt;body&gt;Example&lt;/body&gt;
 &lt;/html&gt;
</pre></div></dd></dl>
<p>In addition to routing and setting up handler paths, <a class="el" href="interface_bx_app.html" title="Routes client requests to BxHandler instances.">BxApp</a> also provides a global state property and a special, override-able launchConfigurator method that allows your application to have a custom configuration operation when it is configured from the Bombax server.</p>
<p>An example of setting several elsewhere defined <a class="el" href="interface_bx_handler.html" title="Persistent handler for client requests.">BxHandler</a> classes in a <a class="el" href="interface_bx_app.html" title="Routes client requests to BxHandler instances.">BxApp</a> suclass: </p>
<div class="fragment"><pre class="fragment"> - (id)<a class="code" href="interface_bx_app.html#a7cd5bf87114bdb030d41885edfe79236" title="overridden to configure the routing and initial state of the BxApp">setup</a> {
     [<span class="keyword">self</span> setHandler:<span class="stringliteral">@&quot;BxmlRouterHandler&quot;</span> forSuffix:<span class="stringliteral">@&quot;.bxml&quot;</span>];
     [<span class="keyword">self</span> setHandler:<span class="stringliteral">@&quot;SearchHandler&quot;</span> forPrefix:<span class="stringliteral">@&quot;/search&quot;</span>];
     [<span class="keyword">self</span> setHandler:<span class="stringliteral">@&quot;IndexHandler&quot;</span> forMatch:<span class="stringliteral">@&quot;/&quot;</span>];
     [<span class="keyword">self</span> setDefaultHandler:<span class="stringliteral">@&quot;404Handler&quot;</span>];
     <span class="keywordflow">return</span> <span class="keyword">self</span>;
 }
</pre></div><dl class="note"><dt><b>Note:</b></dt><dd>The first correct handler is the one returned. If there e.g. multiple matching handlers for a suffix, the first suffix according to <code>compare:</code> will be used. The sequence of path examinations is as follows:<ol type="1">
<li>The first exactly match per <a class="el" href="interface_bx_app.html#setHandler2">setHandler:forMatch:</a></li>
<li>The first matching suffix per <a class="el" href="interface_bx_app.html#setHandler4">setHandler:forSuffix:</a></li>
<li>The first matching prefix per <a class="el" href="interface_bx_app.html#setHandler3">setHandler:forPrefix:</a></li>
<li>The first contained keyword per <a class="el" href="interface_bx_app.html#setHandler4">setHandler:forKeyword:</a></li>
<li>The default handler, if set</li>
</ol>
</dd></dl>
<dl class="warning"><dt><b>Warning:</b></dt><dd>The <code>main</code> entry point function of your application should call <code>BxMain</code> instead of the usual <code>NSApplicationMain</code>. This avoids the creation of a desktop application and sets up your <a class="el" href="interface_bx_app.html" title="Routes client requests to BxHandler instances.">BxApp</a> properly. It is very important that the name passed to BxMain matches your <a class="el" href="interface_bx_app.html" title="Routes client requests to BxHandler instances.">BxApp</a> subclass. If you change the name of your <a class="el" href="interface_bx_app.html" title="Routes client requests to BxHandler instances.">BxApp</a>, you <b>must</b> change the name passed to BxMain (e.g. in <code>init.m</code>) as well. For example, if your <a class="el" href="interface_bx_app.html" title="Routes client requests to BxHandler instances.">BxApp</a> subclass is ExampleApp, your <code>init.m</code> should look like the following (the <code>handler_list.h</code> is necessary to include all generated BXML files): <div class="fragment"><pre class="fragment"><span class="preprocessor"> #import &lt;Cocoa/Cocoa.h&gt;</span>
<span class="preprocessor"> #import &lt;Bombaxtic/Bombaxtic.h&gt;</span>
<span class="preprocessor"> #import &quot;handler_list.h&quot;</span>
 
 <span class="keywordtype">int</span> main(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> *argv[])
 {
     <span class="keywordflow">return</span> BxMain(<span class="stringliteral">&quot;ExampleApp&quot;</span>);
 }
</pre></div></dd></dl>
<dl class="see"><dt><b>See also:</b></dt><dd>For more information about using <a class="el" href="interface_bx_app.html" title="Routes client requests to BxHandler instances.">BxApp</a> and the Bombaxtic request lifecycle, please see the "Bombax Developer's Guide" </dd></dl>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="a725c63f1ee586e5e503c5384062e94b6"></a><!-- doxytag: member="BxApp::exit:" ref="a725c63f1ee586e5e503c5384062e94b6" args="(BOOL isError)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (id) exit: </td>
          <td></td>
          <td class="paramtype">(BOOL)&nbsp;</td>
          <td class="paramname"> <em>isError</em></td>
          <td>&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>invoked as the <a class="el" href="interface_bx_app.html" title="Routes client requests to BxHandler instances.">BxApp</a> is exiting </p>
<p><a class="anchor" id="exit"></a> When exit: returns, the <a class="el" href="interface_bx_app.html" title="Routes client requests to BxHandler instances.">BxApp</a> will terminate. By default exit: does nothing but may be overridden for important pre-exit functions such as closing database connections. exit: may be called as either the result of an uncaught exception, a low level error, or a request to terminate from the Bombax server. exit: should be treated as having the same restrictions in operation as a <code>signal</code> handler, essential that no re-entrant functions are called.</p>
<p>Example that closes an Oracle connection on exit: </p>
<div class="fragment"><pre class="fragment"><span class="preprocessor"> #import &lt;oci.h&gt;</span>
 
 <span class="keyword">static</span> OCISvcCtx *oraServiceContext;
 <span class="keyword">static</span> OCIError *oraError;
 
 - (id)<a class="code" href="interface_bx_app.html#a7cd5bf87114bdb030d41885edfe79236" title="overridden to configure the routing and initial state of the BxApp">setup</a> {
     <span class="comment">// ... (OCIInitialize, allocate Oracle handles, and log on)</span>
 }
 
 - (id)exit {
     OCILogoff(oraServiceContext, oraError);
     <span class="keywordflow">return</span> <span class="keyword">self</span>;
 }
</pre></div><dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>isError</em>&nbsp;</td><td>if true, exiting due to error or exception </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>the <a class="el" href="interface_bx_app.html" title="Routes client requests to BxHandler instances.">BxApp</a> instance </dd></dl>
<dl class="since"><dt><b>Since:</b></dt><dd>1.0 </dd></dl>

</div>
</div>
<a class="anchor" id="a5b86045ed0caa85e3d8c5439d33dad63"></a><!-- doxytag: member="BxApp::handlerForPath:" ref="a5b86045ed0caa85e3d8c5439d33dad63" args="(NSString *path)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (NSString *) handlerForPath: </td>
          <td></td>
          <td class="paramtype">(NSString *)&nbsp;</td>
          <td class="paramname"> <em>path</em></td>
          <td>&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns the classname of the handler for a given path. </p>
<p><a class="anchor" id="handlerForPath"></a> This is automatically called when an incoming request is recieved in order to determine which handler is to be used. </p>
<dl class="warning"><dt><b>Warning:</b></dt><dd>This method may be overridden if you want to perform advanced customization of the path routing. <b>However</b>, it is not recommended that you override this method as doing so will cause your app to ignore all setHandler methods.</dd></dl>
<p>Example that converts all incoming paths to lowercase before handing to the BxApp's default handlerForPath: </p>
<div class="fragment"><pre class="fragment"> - (NSString *)handlerForPath:(NSString *)path {
     <span class="keywordflow">return</span> [super handlerForPath:[path lowercaseString]];
 }
</pre></div><dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>path</em>&nbsp;</td><td>the path the client is requesting with leading '/' </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>the classname of the handler or nil if no handler was found </dd></dl>
<dl class="since"><dt><b>Since:</b></dt><dd>1.0 </dd></dl>

</div>
</div>
<a class="anchor" id="a40fdd156e29dfc464c9d8a211097925d"></a><!-- doxytag: member="BxApp::launchConfigurator" ref="a40fdd156e29dfc464c9d8a211097925d" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (id) launchConfigurator </td>
          <td></td>
          <td class="paramname"></td>
          <td>&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Overridden to provide a configuration user interface. </p>
<p><a class="anchor" id="launchConfigurator"></a> Normally your application does not operate as a typical desktop application with a UI window and menu bar. This considerably reduces the resources required and allows multiple simultaneous processes. However, when the application is configured through the Bombax server, the application calls launchConfigurator and then exits.</p>
<p>By default, this simply shows an information panel and then exits. However, it can be overridden to be extensively customized especially to load and show a Nib file.</p>
<dl class="note"><dt><b>Note:</b></dt><dd>If you override this method, you are responsible for initializing the UI application environment as shown below.</dd></dl>
<p>Example of loading a Nib file : </p>
<div class="fragment"><pre class="fragment"> - (id)<a class="code" href="interface_bx_app.html#a40fdd156e29dfc464c9d8a211097925d" title="Overridden to provide a configuration user interface.">launchConfigurator</a> {
     NSApplication *app = [NSApplication sharedApplication];
     [NSBundle loadNibNamed:<span class="stringliteral">@&quot;MainWindow&quot;</span> owner:app];
     [app run]; <span class="comment">// starts run loop; will not return until program is exited</span>
     <span class="keywordflow">return</span> <span class="keyword">self</span>;
 }
</pre></div><dl class="return"><dt><b>Returns:</b></dt><dd>the <a class="el" href="interface_bx_app.html" title="Routes client requests to BxHandler instances.">BxApp</a> instance </dd></dl>
<dl class="since"><dt><b>Since:</b></dt><dd>1.0 </dd></dl>

</div>
</div>
<a class="anchor" id="ae23fc1d12ca86dfa4a8dedd8b2dcb552"></a><!-- doxytag: member="BxApp::setDefaultHandler:" ref="ae23fc1d12ca86dfa4a8dedd8b2dcb552" args="(NSString *handlerName)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (id) setDefaultHandler: </td>
          <td></td>
          <td class="paramtype">(NSString *)&nbsp;</td>
          <td class="paramname"> <em>handlerName</em></td>
          <td>&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Sets the default handler. </p>
<p><a class="anchor" id="setDefaultHandler"></a> This is the handler that will be used if no specific match is found. </p>
<dl class="note"><dt><b>Note:</b></dt><dd>It is a good practice to set a default handler, especially to handle misspelled and missing paths.</dd></dl>
<p>Example of setting a 404 handler: </p>
<div class="fragment"><pre class="fragment"> - (id)<a class="code" href="interface_bx_app.html#a7cd5bf87114bdb030d41885edfe79236" title="overridden to configure the routing and initial state of the BxApp">setup</a> {
     [<span class="keyword">self</span> setDefaultHandler:<span class="stringliteral">@&quot;404Handler&quot;</span>];
     <span class="keywordflow">return</span> <span class="keyword">self</span>;
 }
</pre></div><dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>handlerName</em>&nbsp;</td><td>the classname or BXML filename of the handler </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>the <a class="el" href="interface_bx_app.html" title="Routes client requests to BxHandler instances.">BxApp</a> instance </dd></dl>
<dl class="since"><dt><b>Since:</b></dt><dd>1.0 </dd></dl>

</div>
</div>
<a class="anchor" id="a78e9d9cb3d16094c40d8ff98f6e62d78"></a><!-- doxytag: member="BxApp::setHandler:forKeyword:" ref="a78e9d9cb3d16094c40d8ff98f6e62d78" args="(NSString *handlerName,[forKeyword] NSString *keyword)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (id) setHandler: </td>
          <td></td>
          <td class="paramtype">(NSString *)&nbsp;</td>
          <td class="paramname"> <em>handlerName</em></td>
        </tr>
        <tr>
          <td class="paramkey">forKeyword:</td>
          <td></td>
          <td class="paramtype">(NSString *)&nbsp;</td>
          <td class="paramname"> <em>keyword</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Sets the handler for paths that contain the keyword. </p>
<p><a class="anchor" id="setHandler"></a> The provided handler will be used if the path contains the given keyword.</p>
<p>Example that will match '/info', '/info/topic', and '/topic/info': </p>
<div class="fragment"><pre class="fragment"> - (id)<a class="code" href="interface_bx_app.html#a7cd5bf87114bdb030d41885edfe79236" title="overridden to configure the routing and initial state of the BxApp">setup</a> {
     [<span class="keyword">self</span> setHandler:<span class="stringliteral">@&quot;InfoHandler&quot;</span> forKeyword:<span class="stringliteral">@&quot;info&quot;</span>];
     <span class="keywordflow">return</span> <span class="keyword">self</span>;
 }
</pre></div><dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>handlerName</em>&nbsp;</td><td>the classname or BXML filename of the handler </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>keyword</em>&nbsp;</td><td>the keyword to match (case sensitive) </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>the <a class="el" href="interface_bx_app.html" title="Routes client requests to BxHandler instances.">BxApp</a> instance </dd></dl>
<dl class="since"><dt><b>Since:</b></dt><dd>1.0 </dd></dl>

</div>
</div>
<a class="anchor" id="aea841290d214595554e44adcf8eaabca"></a><!-- doxytag: member="BxApp::setHandler:forMatch:" ref="aea841290d214595554e44adcf8eaabca" args="(NSString *handlerName,[forMatch] NSString *match)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (id) setHandler: </td>
          <td></td>
          <td class="paramtype">(NSString *)&nbsp;</td>
          <td class="paramname"> <em>handlerName</em></td>
        </tr>
        <tr>
          <td class="paramkey">forMatch:</td>
          <td></td>
          <td class="paramtype">(NSString *)&nbsp;</td>
          <td class="paramname"> <em>match</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Sets the handler for exactly matching paths. </p>
<p><a class="anchor" id="setHandler2"></a> The provided handler will be used if the path exactly matches <code>match</code>. Note that a '/' is automatically appended to <code>match</code> if one does not already exist as all incoming paths contain the leading slash.</p>
<p>Example that will match only '/About': </p>
<div class="fragment"><pre class="fragment"> - (id)<a class="code" href="interface_bx_app.html#a7cd5bf87114bdb030d41885edfe79236" title="overridden to configure the routing and initial state of the BxApp">setup</a> {
     [<span class="keyword">self</span> setHandler:<span class="stringliteral">@&quot;AboutHandler&quot;</span> forMatch:<span class="stringliteral">@&quot;/About&quot;</span>];
     <span class="keywordflow">return</span> <span class="keyword">self</span>;
 }
</pre></div><dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>handlerName</em>&nbsp;</td><td>the classname or BXML filename of the handler </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>match</em>&nbsp;</td><td>the path to exactly match (case sensitive) </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>the <a class="el" href="interface_bx_app.html" title="Routes client requests to BxHandler instances.">BxApp</a> instance </dd></dl>
<dl class="since"><dt><b>Since:</b></dt><dd>1.0 </dd></dl>

</div>
</div>
<a class="anchor" id="a30f4f4af04324695b35089da48acfe14"></a><!-- doxytag: member="BxApp::setHandler:forPrefix:" ref="a30f4f4af04324695b35089da48acfe14" args="(NSString *handlerName,[forPrefix] NSString *prefix)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (id) setHandler: </td>
          <td></td>
          <td class="paramtype">(NSString *)&nbsp;</td>
          <td class="paramname"> <em>handlerName</em></td>
        </tr>
        <tr>
          <td class="paramkey">forPrefix:</td>
          <td></td>
          <td class="paramtype">(NSString *)&nbsp;</td>
          <td class="paramname"> <em>prefix</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Sets the handler for paths that have the prefix. </p>
<p><a class="anchor" id="setHandler3"></a> The provided handler will be used if the path has the provided prefix.</p>
<p>Example that will match files with a '.report' ending: </p>
<div class="fragment"><pre class="fragment"> - (id)<a class="code" href="interface_bx_app.html#a7cd5bf87114bdb030d41885edfe79236" title="overridden to configure the routing and initial state of the BxApp">setup</a> {
     [<span class="keyword">self</span> setHandler:<span class="stringliteral">@&quot;ReportHandler&quot;</span> forPrefix:<span class="stringliteral">@&quot;.prefix&quot;</span>];
     <span class="keywordflow">return</span> <span class="keyword">self</span>;
 }
</pre></div><dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>handlerName</em>&nbsp;</td><td>the classname or BXML filename of the handler </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>prefix</em>&nbsp;</td><td>the prefix to match (case sensitive) </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>the <a class="el" href="interface_bx_app.html" title="Routes client requests to BxHandler instances.">BxApp</a> instance </dd></dl>
<dl class="since"><dt><b>Since:</b></dt><dd>1.0 </dd></dl>

</div>
</div>
<a class="anchor" id="a9bf46a259ed9d647acd6740304188756"></a><!-- doxytag: member="BxApp::setHandler:forSuffix:" ref="a9bf46a259ed9d647acd6740304188756" args="(NSString *handlerName,[forSuffix] NSString *suffix)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (id) setHandler: </td>
          <td></td>
          <td class="paramtype">(NSString *)&nbsp;</td>
          <td class="paramname"> <em>handlerName</em></td>
        </tr>
        <tr>
          <td class="paramkey">forSuffix:</td>
          <td></td>
          <td class="paramtype">(NSString *)&nbsp;</td>
          <td class="paramname"> <em>suffix</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Sets the handler for paths that have the suffix. </p>
<p><a class="anchor" id="setHandler4"></a> The provided handler will be used if the path starts with <code>suffix</code>. Note that a '/' is automatically appended to <code>suffix</code> if one does not already exist as all incoming paths contain the leading slash.</p>
<p>Example that will match '/users' and '/users/jane': </p>
<div class="fragment"><pre class="fragment"> - (id)<a class="code" href="interface_bx_app.html#a7cd5bf87114bdb030d41885edfe79236" title="overridden to configure the routing and initial state of the BxApp">setup</a> {
     [<span class="keyword">self</span> setHandler:<span class="stringliteral">@&quot;UserHandler&quot;</span> forSuffix:<span class="stringliteral">@&quot;/users&quot;</span>];
     <span class="keywordflow">return</span> <span class="keyword">self</span>;
 }
</pre></div><dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>handlerName</em>&nbsp;</td><td>the classname or BXML filename of the handler </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>suffix</em>&nbsp;</td><td>the suffix to match (case sensitive) </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>the <a class="el" href="interface_bx_app.html" title="Routes client requests to BxHandler instances.">BxApp</a> instance </dd></dl>
<dl class="since"><dt><b>Since:</b></dt><dd>1.0 </dd></dl>

</div>
</div>
<a class="anchor" id="a7cd5bf87114bdb030d41885edfe79236"></a><!-- doxytag: member="BxApp::setup" ref="a7cd5bf87114bdb030d41885edfe79236" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (id) setup </td>
          <td></td>
          <td class="paramname"></td>
          <td>&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>overridden to configure the routing and initial state of the <a class="el" href="interface_bx_app.html" title="Routes client requests to BxHandler instances.">BxApp</a> </p>
<p><a class="anchor" id="setup"></a> <code>setup</code> is called when your application is first started and should be overridden to customize its operation. Normally, whenever you create a <a class="el" href="interface_bx_handler.html" title="Persistent handler for client requests.">BxHandler</a>, you will add a corresponding line to setup to map a path to your new handler. If you want to persist an object across multiple handlers, such as a database connection, setup is the preferred location to do so (<a class="el" href="interface_bx_handler.html" title="Persistent handler for client requests.">BxHandler</a> instances can access your <a class="el" href="interface_bx_app.html" title="Routes client requests to BxHandler instances.">BxApp</a> through their <a class="el" href="interface_bx_handler.html#app">app</a> property).</p>
<p>Example that sets up a default handler and a configuration variable: </p>
<div class="fragment"><pre class="fragment"> - (id)<a class="code" href="interface_bx_app.html#a7cd5bf87114bdb030d41885edfe79236" title="overridden to configure the routing and initial state of the BxApp">setup</a> {
     [<span class="keyword">self</span> setDefaultHandler:<span class="stringliteral">@&quot;MyHandler&quot;</span>];
     [<span class="keyword">self</span>.state setObject:[[NSUserDefaults standardUserDefaults] stringForKey:<span class="stringliteral">@&quot;preferredLanguage&quot;</span>]
                    forKey:<span class="stringliteral">@&quot;preferredLanguage&quot;</span>];
     <span class="keywordflow">return</span> <span class="keyword">self</span>;
 }
</pre></div> <dl class="return"><dt><b>Returns:</b></dt><dd>the <a class="el" href="interface_bx_app.html" title="Routes client requests to BxHandler instances.">BxApp</a> instance </dd></dl>
<dl class="since"><dt><b>Since:</b></dt><dd>1.0 </dd></dl>

</div>
</div>
<a class="anchor" id="ab717fd41fb9234f8ebf71f62c56ce635"></a><!-- doxytag: member="BxApp::staticWebPath:" ref="ab717fd41fb9234f8ebf71f62c56ce635" args="(NSString *resource)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (NSString *) staticWebPath: </td>
          <td></td>
          <td class="paramtype">(NSString *)&nbsp;</td>
          <td class="paramname"> <em>resource</em></td>
          <td>&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns the web path for a given static resource. </p>
<p><a class="anchor" id="staticWebPath"></a> This method returns an internet-ready path to a static resource such as an image or CSS file. In order to determine the web path, <code>staticWebPath</code> first adds the root of the <a class="el" href="interface_bx_app.html" title="Routes client requests to BxHandler instances.">BxApp</a> location in the Bombax server (for example, if your <a class="el" href="interface_bx_app.html" title="Routes client requests to BxHandler instances.">BxApp</a> is available at "/example" then "/example" is prefixed to the web path). Secondly, the <code>"BxApp Static Web Path"</code> variable in your BxApp's information property list (Info.plist) is added if present. If <code>"BxApp Static Web Path"</code> is not present, "static" is substituted. Finally the <code>resource</code> itself is added. For example, if a <a class="el" href="interface_bx_app.html" title="Routes client requests to BxHandler instances.">BxApp</a> had the location "/example" and the <code>"BxApp Static Web Path"</code> of "static", if <code>staticWebPath</code> was called with "logo.png" it would return "/example/static/logo.png".</p>
<dl class="note"><dt><b>Note:</b></dt><dd><code>resource</code> should exist within the BxApp's physical folder specified in <code>"BxApp Static Resource Path"</code>. By default this folder is named "static".</dd>
<dd>
In debugging mode <a class="el" href="interface_bx_static_file_handler.html">BxStaticFileHandler</a> is implicitly used to handle request coming into the <code>"BxApp Static Web Path"</code>.</dd></dl>
<div class="fragment"><pre class="fragment"> - (id)renderWithTransport:(<a class="code" href="interface_bx_transport.html" title="Handles communication with HTTP client.">BxTransport</a> *)transport {
     [transport writeFormat:<span class="stringliteral">@&quot;&lt;html&gt;&lt;head&gt;&lt;link rel=&quot;</span>stylesheet<span class="stringliteral">&quot; type=&quot;</span>text/css<span class="stringliteral">&quot; href=&quot;</span>%<span class="stringliteral">@&quot;&quot;</span> /&gt;&lt;/head&gt;&lt;body&gt;<span class="stringliteral">&quot;,</span>
<span class="stringliteral">                            [self.app staticWebPath:@&quot;</span>main.css<span class="stringliteral">&quot;]];</span>
<span class="stringliteral">     // ...</span>
<span class="stringliteral">     [transport write:@&quot;</span>&lt;/body&gt;&lt;/html&gt;<span class="stringliteral">&quot;];</span>
<span class="stringliteral">     return self;</span>
<span class="stringliteral"> }</span>
</pre></div><dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>resource</em>&nbsp;</td><td>the name of the </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>the web path such as <code>/static/image</code>.jpg </dd></dl>

</div>
</div>
<hr/><h2>Property Documentation</h2>
<a class="anchor" id="aed67360002e969b0490e8a5566d420bf"></a><!-- doxytag: member="BxApp::state" ref="aed67360002e969b0490e8a5566d420bf" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (NSMutableDictionary*) state<code> [read, assign]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p><a class="anchor" id="state"></a> Application-wide state that can be accessed by each <a class="el" href="interface_bx_handler.html" title="Persistent handler for client requests.">BxHandler</a> (through their <a class="el" href="interface_bx_handler.html#app">app</a> property). </p>
<dl class="warning"><dt><b>Warning:</b></dt><dd>Because multiple threads could access state at the same time, you may need to ensure that any transactional behavior is threadsafe. For example, you may want to wrap access of the state through wrapper methods such as: <div class="fragment"><pre class="fragment"> <span class="keyword">static</span> NSRecursiveLock *_stateLock = nil;
 
 - (NSMutableDictionary *)lockState {
     <span class="keywordflow">if</span> (_stateLock == nil) {
         _stateLock = [[NSRecursiveLock alloc] init];
     }
     [_stateLock lock];
     <span class="keywordflow">return</span> <span class="keyword">self</span>.state;
 }
 
 - (id)unlockState {
     [_stateLock unlock];
     <span class="keywordflow">return</span> <span class="keyword">self</span>;
 }
</pre></div> This could then be used safely within a handler like this: <div class="fragment"><pre class="fragment"> - (id)renderWithTransport:(<a class="code" href="interface_bx_transport.html" title="Handles communication with HTTP client.">BxTransport</a> *)transport {
     [<span class="keyword">self</span>.app lockState];
     <span class="comment">// ... do something with self.app.state</span>
     [<span class="keyword">self</span>.app unlockState];
     <span class="keywordflow">return</span> <span class="keyword">self</span>;
 }
</pre></div></dd></dl>
<dl class="see"><dt><b>See also:</b></dt><dd>Apple's Thread Programming Guide </dd></dl>
<dl class="since"><dt><b>Since:</b></dt><dd>1.0 </dd></dl>

</div>
</div>
</div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&nbsp;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&nbsp;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&nbsp;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&nbsp;</span>Properties</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</body>
</html>
